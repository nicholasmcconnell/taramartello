{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{BrowserRouter,Switch,Route,useHistory}from'react-router-dom';import UserContext from'./context/UserContext';import Axios from'axios';import Header from'./components/layout/Header';import Home from'./components/pages/Home.js';import Login from'./components/auth/Login.js';import Register from'./components/auth/Register.js';import CreateTodos from'./components/todo/CreateTodos';import GetTodos from'./components/todo/GetTodos';import SearchTodos from'./components/todo/SearchTodo';import'./App.css';function App(){var _useState=useState({token:undefined,user:undefined}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var history=useHistory();useEffect(function(){var checkLoggedIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,tokenRes,userRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"auth-token\");if(!(token===null)){_context.next=6;break;}localStorage.setItem('lastVisited','');localStorage.setItem('auth-token','');token='';return _context.abrupt(\"return\");case 6:_context.next=8;return Axios.post('/api/users/tokenIsValid',null,{headers:{'x-auth-token':token}});case 8:tokenRes=_context.sent;if(!tokenRes.data){_context.next=14;break;}_context.next=12;return Axios.get('/api/users/',{headers:{'x-auth-token':token}});case 12:userRes=_context.sent;setUserData({token:token,user:userRes.data});case 14:case\"end\":return _context.stop();}}},_callee);}));return function checkLoggedIn(){return _ref.apply(this,arguments);};}();checkLoggedIn();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BrowserRouter,null,/*#__PURE__*/React.createElement(UserContext.Provider,{value:{userData:userData,setUserData:setUserData}},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Home}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",component:Login}),/*#__PURE__*/React.createElement(Route,{path:\"/register\",component:Register}),/*#__PURE__*/React.createElement(Route,{path:\"/createtodos\",component:CreateTodos}),/*#__PURE__*/React.createElement(Route,{path:\"/gettodos\",component:GetTodos}),/*#__PURE__*/React.createElement(Route,{path:\"/searchtodos\",component:SearchTodos})))));}export default App;","map":{"version":3,"sources":["/Users/nicholasmcconnell/code/todo/client/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Switch","Route","useHistory","UserContext","Axios","Header","Home","Login","Register","CreateTodos","GetTodos","SearchTodos","App","token","undefined","user","userData","setUserData","history","checkLoggedIn","localStorage","getItem","setItem","post","headers","tokenRes","data","get","userRes"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,aAAT,CAAwBC,MAAxB,CAAgCC,KAAhC,CAAuCC,UAAvC,KAAyD,kBAAzD,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,4BAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,+BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CAEA,MAAO,WAAP,CAEA,QAASC,CAAAA,GAAT,EAAe,eACmBf,QAAQ,CAAC,CACvCgB,KAAK,CAAEC,SADgC,CAEvCC,IAAI,CAAED,SAFiC,CAAD,CAD3B,wCACNE,QADM,eACIC,WADJ,eAMb,GAAMC,CAAAA,OAAO,CAAGhB,UAAU,EAA1B,CAEAJ,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,aAAa,0FAAG,8JAChBN,KADgB,CACRO,YAAY,CAACC,OAAb,CAAqB,YAArB,CADQ,MAEhBR,KAAK,GAAK,IAFM,0BAGlBO,YAAY,CAACE,OAAb,CAAqB,aAArB,CAAoC,EAApC,EACAF,YAAY,CAACE,OAAb,CAAqB,YAArB,CAAmC,EAAnC,EACAT,KAAK,CAAG,EAAR,CALkB,8DASGT,CAAAA,KAAK,CAACmB,IAAN,CACrB,yBADqB,CAErB,IAFqB,CAGrB,CAAEC,OAAO,CAAE,CAAE,eAAgBX,KAAlB,CAAX,CAHqB,CATH,QASdY,QATc,mBAchBA,QAAQ,CAACC,IAdO,iDAeItB,CAAAA,KAAK,CAACuB,GAAN,CAAU,aAAV,CAAyB,CAC7CH,OAAO,CAAE,CAAE,eAAgBX,KAAlB,CADoC,CAAzB,CAfJ,SAeZe,OAfY,eAkBlBX,WAAW,CAAC,CACVJ,KAAK,CAALA,KADU,CAEVE,IAAI,CAAEa,OAAO,CAACF,IAFJ,CAAD,CAAX,CAlBkB,uDAAH,kBAAbP,CAAAA,aAAa,0CAAnB,CAwBAA,aAAa,GACd,CA1BQ,CA0BN,EA1BM,CAAT,CA4BA,mBACE,qDACE,oBAAC,aAAD,mBACE,oBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEH,QAAQ,CAARA,QAAF,CAAYC,WAAW,CAAXA,WAAZ,CAA7B,eACE,oBAAC,MAAD,MADF,cAGI,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEX,IAAjC,EADF,cAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAEC,KAAhC,EAFF,cAGE,oBAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,SAAS,CAAEC,QAAnC,EAHF,cAIE,oBAAC,KAAD,EAAO,IAAI,CAAC,cAAZ,CAA2B,SAAS,CAAEC,WAAtC,EAJF,cAKE,oBAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,SAAS,CAAEC,QAAnC,EALF,cAME,oBAAC,KAAD,EAAO,IAAI,CAAC,cAAZ,CAA2B,SAAS,CAAEC,WAAtC,EANF,CAHJ,CADF,CADF,CADF,CAmBD,CAED,cAAeC,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Switch, Route, useHistory } from 'react-router-dom';\nimport UserContext from './context/UserContext';\nimport Axios from 'axios';\n\nimport Header from './components/layout/Header'\nimport Home from './components/pages/Home.js';\nimport Login from './components/auth/Login.js';\nimport Register from './components/auth/Register.js';\nimport CreateTodos from './components/todo/CreateTodos';\nimport GetTodos from './components/todo/GetTodos';\nimport SearchTodos from './components/todo/SearchTodo';\n\nimport './App.css';\n\nfunction App() {\n  const [userData, setUserData] = useState({\n    token: undefined,\n    user: undefined\n  })\n\n  const history = useHistory();\n\n  useEffect(() => {\n    const checkLoggedIn = async () => {\n      let token = localStorage.getItem(\"auth-token\");\n      if (token === null) {\n        localStorage.setItem('lastVisited', '');\n        localStorage.setItem('auth-token', '');\n        token = '';\n        return;\n      }\n\n      const tokenRes = await Axios.post(\n        '/api/users/tokenIsValid',\n        null,\n        { headers: { 'x-auth-token': token } }\n      );\n      if (tokenRes.data) {\n        const userRes = await Axios.get('/api/users/', {\n          headers: { 'x-auth-token': token }\n        });\n        setUserData({\n          token,\n          user: userRes.data\n        })\n      }\n    };\n    checkLoggedIn();\n  }, [])\n\n  return (\n    <>\n      <BrowserRouter>\n        <UserContext.Provider value={{ userData, setUserData }}>\n          <Header />\n          {/* <div className='page'> */}\n            <Switch>\n              <Route exact path='/' component={Home}  />\n              <Route path='/login' component={Login} />\n              <Route path='/register' component={Register} />\n              <Route path='/createtodos' component={CreateTodos} />\n              <Route path='/gettodos' component={GetTodos} />\n              <Route path='/searchtodos' component={SearchTodos} />\n            </Switch>\n          {/* </div> */}\n        </UserContext.Provider>\n      </BrowserRouter>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}