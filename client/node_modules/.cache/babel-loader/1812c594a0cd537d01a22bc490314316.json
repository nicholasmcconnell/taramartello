{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useHistory}from'react-router-dom';import UserContext from'../../context/UserContext';import Axios from'axios';import ErrorNotice from'../misc/ErrorNotice';export default function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var history=useHistory();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var loginUser,loginRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;loginUser={email:email,password:password};_context.next=5;return Axios.post('http://localhost:5000/api/users/login',loginUser);case 5:loginRes=_context.sent;setUserData({token:loginRes.data.token,user:loginRes.data.user});localStorage.setItem('auth-token',loginRes.data.token);history.push('/');_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"page\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),error&&/*#__PURE__*/React.createElement(ErrorNotice,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/React.createElement(\"form\",{className:\"form\",onSubmit:submit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{id:\"login-email\",type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"login-password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{id:\"login-password\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Log in\"})));}","map":{"version":3,"sources":["/Users/nicholasmcconnell/code/todo/client/src/components/auth/Login.js"],"names":["React","useState","useContext","useHistory","UserContext","Axios","ErrorNotice","Login","email","setEmail","password","setPassword","error","setError","setUserData","history","submit","e","preventDefault","loginUser","post","loginRes","token","data","user","localStorage","setItem","push","response","msg","undefined","target","value"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,eACFN,QAAQ,EADN,wCACrBO,KADqB,eACdC,QADc,8BAEIR,QAAQ,EAFZ,yCAErBS,QAFqB,eAEXC,WAFW,8BAGFV,QAAQ,EAHN,yCAGrBW,KAHqB,eAGdC,QAHc,+BAKJX,UAAU,CAACE,WAAD,CALN,CAKpBU,WALoB,aAKpBA,WALoB,CAM5B,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CAEA,GAAMa,CAAAA,MAAM,0FAAG,iBAAOC,CAAP,yIACXA,CAAC,CAACC,cAAF,GADW,gBAGDC,SAHC,CAGW,CAAEX,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAHX,uBAIgBL,CAAAA,KAAK,CAACe,IAAN,CACnB,uCADmB,CAEnBD,SAFmB,CAJhB,QAIDE,QAJC,eASPP,WAAW,CAAC,CACRQ,KAAK,CAAED,QAAQ,CAACE,IAAT,CAAcD,KADb,CAERE,IAAI,CAAEH,QAAQ,CAACE,IAAT,CAAcC,IAFZ,CAAD,CAAX,CAKAC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCL,QAAQ,CAACE,IAAT,CAAcD,KAAjD,EACAP,OAAO,CAACY,IAAR,CAAa,GAAb,EAfO,iFAiBN,YAAIC,QAAJ,CAAaL,IAAb,CAAkBM,GAAlB,EAAyBhB,QAAQ,CAAC,YAAIe,QAAJ,CAAaL,IAAb,CAAkBM,GAAnB,CAAlC,CAjBO,qEAAH,kBAANb,CAAAA,MAAM,4CAAZ,CAsBA,mBACI,2BAAK,SAAS,CAAC,MAAf,eACI,sCADJ,CAEKJ,KAAK,eACF,oBAAC,WAAD,EAAa,OAAO,CAAEA,KAAtB,CAA6B,UAAU,CAAE,4BAAMC,CAAAA,QAAQ,CAACiB,SAAD,CAAd,EAAzC,EAHR,cAKI,4BAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAEd,MAAjC,eACI,6BAAO,OAAO,CAAC,aAAf,UADJ,cAEI,6BACI,EAAE,CAAC,aADP,CAEI,IAAI,CAAC,OAFT,CAGI,QAAQ,CAAE,kBAAAC,CAAC,QAAIR,CAAAA,QAAQ,CAACQ,CAAC,CAACc,MAAF,CAASC,KAAV,CAAZ,EAHf,EAFJ,cAQI,6BAAO,OAAO,CAAC,gBAAf,aARJ,cASI,6BACI,EAAE,CAAC,gBADP,CAEI,IAAI,CAAC,UAFT,CAGI,QAAQ,CAAE,kBAAAf,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf,EAHf,EATJ,cAeI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,EAfJ,CALJ,CADJ,CA0BH","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\nimport Axios from 'axios';\nimport ErrorNotice from '../misc/ErrorNotice';\n\nexport default function Login() {\n    const [email, setEmail] = useState();\n    const [password, setPassword] = useState();\n    const [error, setError] = useState();\n\n    const { setUserData } = useContext(UserContext);\n    const history = useHistory();\n\n    const submit = async (e) => {\n        e.preventDefault();\n        try {\n            const loginUser = { email, password };\n            const loginRes = await Axios.post(\n                'http://localhost:5000/api/users/login',\n                loginUser\n            );\n\n            setUserData({\n                token: loginRes.data.token,\n                user: loginRes.data.user\n            });\n\n            localStorage.setItem('auth-token', loginRes.data.token);\n            history.push('/');\n        } catch (err) {\n            (err.response.data.msg && setError(err.response.data.msg))\n        }\n\n    }\n\n    return (\n        <div className='page'>\n            <h2>Login</h2>\n            {error && (\n                <ErrorNotice message={error} clearError={() => setError(undefined)} />\n            )}\n            <form className='form' onSubmit={submit}>\n                <label htmlFor='login-email'>Email</label>\n                <input\n                    id='login-email'\n                    type='email'\n                    onChange={e => setEmail(e.target.value)}\n                />\n\n                <label htmlFor='login-password'>Password</label>\n                <input\n                    id='login-password'\n                    type='password'\n                    onChange={e => setPassword(e.target.value)}\n                />\n\n                <input type='submit' value='Log in' />\n\n            </form>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}