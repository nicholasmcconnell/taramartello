{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nicholasmcconnell/code/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useHistory}from'react-router-dom';import UserContext from'../../context/UserContext';import Axios from'axios';import ErrorNotice from'../misc/ErrorNotice';export default function Register(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),passwordCheck=_useState6[0],setpasswordCheckl=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),displayName=_useState8[0],setDisplayName=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var history=useHistory();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newUser,loginRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;newUser={email:email,password:password,passwordCheck:passwordCheck,displayName:displayName};_context.next=5;return Axios.post('http://localhost:5000/api/users/register',newUser);case 5:_context.next=7;return Axios.post('http://localhost:5000/api/users/login',{email:email,password:password});case 7:loginRes=_context.sent;setUserData({token:loginRes.data.token,user:loginRes.data.user});localStorage.setItem('auth-token',loginRes.data.token);history.push('/');_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"page\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Register\"),error&&/*#__PURE__*/React.createElement(ErrorNotice,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/React.createElement(\"form\",{className:\"form\",onSubmit:submit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"register-email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{id:\"register-email\",type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"register-password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{id:\"register-password\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Verify password\",onChange:function onChange(e){return setpasswordCheckl(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"register-display-name\"},\"Display name\"),/*#__PURE__*/React.createElement(\"input\",{id:\"register-display-name\",type:\"text\",onChange:function onChange(e){return setDisplayName(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Register\"})));}","map":{"version":3,"sources":["/Users/nicholasmcconnell/code/todo/client/src/components/auth/Register.js"],"names":["React","useState","useContext","useHistory","UserContext","Axios","ErrorNotice","Register","email","setEmail","password","setPassword","passwordCheck","setpasswordCheckl","displayName","setDisplayName","error","setError","setUserData","history","submit","e","preventDefault","newUser","post","loginRes","token","data","user","localStorage","setItem","push","response","msg","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\nimport Axios from 'axios';\nimport ErrorNotice from '../misc/ErrorNotice';\n\nexport default function Register() {\n\n    const [email, setEmail] = useState();\n    const [password, setPassword] = useState();\n    const [passwordCheck, setpasswordCheckl] = useState();\n    const [displayName, setDisplayName] = useState();\n    const [error, setError] = useState();\n\n    const { setUserData } = useContext(UserContext);\n    const history = useHistory();\n\n    const submit = async (e) => {\n        e.preventDefault();\n        try {\n            const newUser = { email, password, passwordCheck, displayName };\n            await Axios.post(\n                'http://localhost:5000/api/users/register',\n                newUser\n            );\n            const loginRes = await Axios.post('http://localhost:5000/api/users/login', {\n                email,\n                password\n            });\n\n            setUserData({\n                token: loginRes.data.token,\n                user: loginRes.data.user\n            });\n\n            localStorage.setItem('auth-token', loginRes.data.token);\n            history.push('/');\n        } catch (err) {\n            err.response.data.msg && setError(err.response.data.msg);\n        }\n\n    }\n    return (\n        <div className='page'>\n            <h2>Register</h2>\n            {error && (\n                <ErrorNotice message={error} clearError={() => setError(undefined)} />\n            )}\n            <form className='form' onSubmit={submit}>\n                <label htmlFor='register-email'>Email</label>\n                <input\n                    id='register-email'\n                    type='email'\n                    onChange={e => setEmail(e.target.value)}\n                />\n\n                <label htmlFor='register-password'>Password</label>\n                <input\n                    id='register-password'\n                    type='password'\n                    onChange={e => setPassword(e.target.value)}\n                />\n                <input\n                    type='password'\n                    placeholder='Verify password'\n                    onChange={e => setpasswordCheckl(e.target.value)}\n                />\n\n                <label htmlFor='register-display-name'>Display name</label>\n                <input\n                    id='register-display-name'\n                    type='text'\n                    onChange={e => setDisplayName(e.target.value)}\n                />\n\n                <input type='submit' value='Register' />\n\n            </form>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}